{% extends '_layout.twig' %}

{% block title %}Welcome to Bethesda Ministry
{% endblock %}

{% block content %}
  <section class="hero">
    <div class="hero-overlay"></div>
    <div class="hero-content">
      <h1>Welcome to Bethesda Ministry</h1>
      <p>Join us in worship and fellowship.</p>
      <div class="hero-buttons">
        <a href="{{ siteUrl('prayer-room') }}" class="button primary">Visit Prayer Room</a>
        <a href="{{ siteUrl('sermons') }}" class="button primary">View Activities</a>
      </div>
    </div>
  </section>

  {# --- LATEST SERMONS --- #}
  <section class="home-section">
    <h2>Latest Sermons</h2>
    <div class="home-grid">
      {% set upcomingSermons = craft.entries()
    .section('sermons')
    .sermonDate('>= ' ~ now|atom)
    .orderBy('sermonDate asc')
    .limit(3)
    .all() %}

      {% for sermon in upcomingSermons %}
        <div class="home-card">
          {% set image = sermon.sermonImage.one() ?? null %}
          <img src="{{ image ? image.url : '/assets/default-placeholder.jpg' }}" alt="{{ sermon.title }}">
          <h3>{{ sermon.title }}</h3>
          <p>{{ sermon.sermonDescription|striptags|slice(0, 150) ~ '...' }}</p>
          <a href="{{ sermon.url }}" class="button">View Details</a>
        </div>
      {% endfor %}
    </div>
  </section>


  {# --- LATEST EVENTS --- #}
  <section class="home-section">
    <h2>Upcoming Events</h2>
    <div class="home-grid">
      {% set upcomingEvents = craft.entries()
    .section('events')
    .eventDate('>= ' ~ now|atom)
    .orderBy('eventDate asc')
    .limit(3)
    .all() %}

      {% for event in upcomingEvents %}
        <div class="home-card">
          {% set image = event.eventImage.one() ?? null %}
          <img src="{{ image ? image.url : '/assets/default-placeholder.jpg' }}" alt="{{ event.title }}">
          <h3>{{ event.title }}</h3>
          <p>{{ event.eventDescription|striptags|slice(0, 150) ~ '...' }}</p>
          <a href="{{ event.url }}" class="button">View Details</a>
        </div>
      {% endfor %}
    </div>
  </section>


  {# --- LATEST ARTICLES --- #}
  <section class="home-section">
    <h2>Latest Articles</h2>
    <div class="home-grid">
      {% set recentArticles = craft.entries()
    .section('articles')
    .orderBy('postDate desc')
    .limit(3)
    .all() %}

      {% for article in recentArticles %}
        <div class="home-card">
          {% set image = article.articleImage.one() ?? null %}
          <img src="{{ image ? image.url : '/assets/default-placeholder.jpg' }}" alt="{{ article.title }}">
          <h3>{{ article.title }}</h3>
          <p>{{ article.articleContent|striptags|slice(0, 150) ~ '...' }}</p>
          <a href="{{ article.url }}" class="button">Read More</a>
        </div>
      {% endfor %}
    </div>
  </section>

{% endblock %}
