{% extends '_layout.twig' %}

{% block content %}
    <h1>Contact Us</h1>
    <form method="post" action="/contact-form/send-message" id="contact-form">
        {{ csrfInput() }}

        <label>Name:</label>
        <input type="text" name="name" required>

        <label>Email:</label>
        <input type="email" name="email" required>

        <label>Title:</label>
        <input type="text" name="title" required>

        <label>Message:</label>
        <textarea name="message" required></textarea>

        <button type="submit">Send</button>
    </form>

    <div id="form-response"></div>

    <script>
    document.getElementById('contact-form').addEventListener('submit', function (e) {
        e.preventDefault();
        const formData = new FormData(this);
        
        fetch(this.action, {
            method: 'POST',
            body: formData,
        })
        .then(response => response.json())
        .then(data => {
            document.getElementById('form-response').innerHTML = `<p>${data.message}</p>`;
        })
        .catch(error => console.error('Error:', error));
    });
    </script>
{% endblock %}
