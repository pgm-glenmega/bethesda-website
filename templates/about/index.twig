{% extends '_layout.twig' %}

{% block title %}About Us | Bethesda Ministry
{% endblock %}

{% block content %}
  <div
    class="container about-page">

    <section class="hero hero--about">
      <div class="hero-overlay"></div>
      <div class="hero-content">
        <h1>{{ entry.heroHeading }}</h1>
        <p>{{ entry.heroSubheading }}</p>
      </div>
    </section>

    <section class="about-history">
      <div class="history-content">
        <h2>{{ entry.historyHeading }}</h2>
        <p>
          {{ entry.historyText }}</p>
      </div>

      {% set historyImg = entry.historyImage.one() %}
      <div class="history-image">
        {% if historyImg %}
          <img src="{{ historyImg.url }}" alt="Bethesda Ministry History">
        {% endif %}
      </div>
    </section>

    {% set scriptures = entry.dailyScripture.all() %}
    {% if scriptures|length %}
      {% set seed = now|date('Ymd')|hash('crc32')|integer %}
      {% set index = seed % scriptures|length %}
      {% set scripture = scriptures[index] %}

      <section class="scripture-section">
        <div class="scripture-container">
          <div class="scripture-text" data-animation="moveUpTitle">
            <h3 class="scripture-line">"{{ scripture.scriptureVerse }}"</h3>
          </div>
          <div class="scripture-text scripture-ref" data-animation="moveUpTitle">
            <p>{{ scripture.scriptureReference }}</p>
          </div>
        </div>
      </section>
    {% endif %}

    <section class="about-section">
      <h2>{{ entry.membersHeading }}</h2>

      {% if entry.membersList|length %}
        <div class="about-grid">
          {% for block in entry.membersList %}
            <div class="about-card">
              <img src="{{ block.memberImage.one().url }}" alt="{{ block.memberName }}">
                <div class="about-card-content"> <h3>{{ block.memberName }}</h3>
                <p>{{ block.memberDescription }}</p>
              </div>
            </div>
          {% endfor %}
        </div>
      {% else %}
        <p>No members added yet.</p>
      {% endif %}
    </section>


    <section class="about-section">
      <h2>{{ entry.artistsHeading }}</h2>
      <div class="about-grid">
        <div class="about-card">
          <img src="/assets/images/artist-1.webp" alt="Jonathan">
          <div class="about-card-content">
            <h3>Jonathan Blake</h3>
            <p>Gospel musician & songwriter. His music inspires worship worldwide.</p>
          </div>
        </div>
      </div>
    </section>

  </div>

  {# GSAP Animation Script #}
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

  <script>
    document.addEventListener("DOMContentLoaded", function () {
      gsap.registerPlugin(ScrollTrigger);

      // Select all elements with moveUpTitle animation
      const $fadeTitles = document.querySelectorAll("[data-animation='moveUpTitle']");

      // Apply GSAP animation
      $fadeTitles.forEach(e => {
        gsap.from(e, {
          y: 100, // Moves up
          opacity: 0,
          rotate: 2, // Slight rotation for effect
          duration: 1.5,
          ease: "power3.out",
          scrollTrigger: {
            trigger: e,
            start: "top 80%", // Triggers animation when element is in viewport
            toggleActions: "play none none reset"
          }
        });
      });
    });
  </script>

{% endblock %}
